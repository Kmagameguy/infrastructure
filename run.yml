---
# Update All
- hosts: all
  become: true
  vars_files:
    - 'vars/vault.yml'
  roles:
    - role: base
    - role: restic
  tags: update

# Update Docker services
- hosts: docker
  vars_files:
    - 'vars/vault.yml'
  roles:
    - role: docker
  tags: docker

# Deploy Docker services on Calpamos
- hosts: calpamos
  vars_files:
    - 'vars/vault.yml'
  roles:
    - role: calpamos
    - role: ironicbadger.ansible_role_docker_compose_generator
  tags: compose

# Deploy Docker services on Matrix
- hosts: matrix
  vars_files:
    - 'vars/vault.yml'
  roles:
    - role: matrix
    - role: ironicbadger.ansible_role_docker_compose_generator
  tags: compose

# Deploy Minecraft Server
- hosts: matrix
  vars_files:
    - 'vars/vault.yml'
  roles:
    - role: minecraft
  tags: minecraft
